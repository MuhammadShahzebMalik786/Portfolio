<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maze Runner - Browser Games Hub</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .header { color: white; text-align: center; margin-bottom: 20px; }
        .game-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        canvas { border: 3px solid #333; border-radius: 10px; display: block; }
        .score { text-align: center; font-size: 18px; font-weight: bold; margin: 15px 0; }
        .controls { text-align: center; margin: 15px 0; }
        .btn { background: #4f46e5; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #3730a3; }
        .back-link { color: white; text-decoration: none; margin-bottom: 20px; display: inline-block; }
        .instructions { background: #f0f0f0; padding: 15px; border-radius: 10px; margin: 15px 0; }
    </style>
</head>
<body>
    <a href="../index.html" class="back-link">‚Üê Back to Games Hub</a>
    
    <div class="header">
        <h1>üåÄ Maze Runner</h1>
        <p>Developed by <strong>Muhammad Shahzeb Malik</strong></p>
    </div>

    <div class="game-container">
        <div class="score">Time: <span id="time">0</span>s | Best: <span id="best">--</span>s</div>
        <canvas id="gameCanvas" width="500" height="500"></canvas>
        
        <div class="controls">
            <button class="btn" onclick="newMaze()">New Maze</button>
            <button class="btn" onclick="resetPlayer()">Reset</button>
        </div>

        <div class="instructions">
            <h3>How to Play:</h3>
            <p>‚Ä¢ Use arrow keys to move</p>
            <p>‚Ä¢ Find the exit (green square)</p>
            <p>‚Ä¢ Try to beat your best time!</p>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        const CELL_SIZE = 20;
        const ROWS = 25;
        const COLS = 25;
        
        let maze = [];
        let player = { x: 1, y: 1 };
        let exit = { x: COLS - 2, y: ROWS - 2 };
        let gameTime = 0;
        let gameStarted = false;
        let timer = null;
        let bestTime = localStorage.getItem('mazebestTime') || null;
        
        function generateMaze() {
            maze = Array(ROWS).fill().map(() => Array(COLS).fill(1));
            
            function carve(x, y) {
                maze[y][x] = 0;
                const directions = [[0, 2], [2, 0], [0, -2], [-2, 0]];
                directions.sort(() => Math.random() - 0.5);
                
                for (let [dx, dy] of directions) {
                    const nx = x + dx;
                    const ny = y + dy;
                    
                    if (nx > 0 && nx < COLS - 1 && ny > 0 && ny < ROWS - 1 && maze[ny][nx] === 1) {
                        maze[y + dy/2][x + dx/2] = 0;
                        carve(nx, ny);
                    }
                }
            }
            
            carve(1, 1);
            maze[exit.y][exit.x] = 0;
        }
        
        function draw() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw maze
            for (let y = 0; y < ROWS; y++) {
                for (let x = 0; x < COLS; x++) {
                    if (maze[y][x] === 1) {
                        ctx.fillStyle = '#333';
                        ctx.fillRect(x * CELL_SIZE, y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
                    }
                }
            }
            
            // Draw exit
            ctx.fillStyle = '#0f0';
            ctx.fillRect(exit.x * CELL_SIZE, exit.y * CELL_SIZE, CELL_SIZE, CELL_SIZE);
            
            // Draw player
            ctx.fillStyle = '#f00';
            ctx.fillRect(player.x * CELL_SIZE + 2, player.y * CELL_SIZE + 2, CELL_SIZE - 4, CELL_SIZE - 4);
        }
        
        function movePlayer(dx, dy) {
            const newX = player.x + dx;
            const newY = player.y + dy;
            
            if (newX >= 0 && newX < COLS && newY >= 0 && newY < ROWS && maze[newY][newX] === 0) {
                player.x = newX;
                player.y = newY;
                
                if (!gameStarted) {
                    gameStarted = true;
                    startTimer();
                }
                
                // Check win
                if (player.x === exit.x && player.y === exit.y) {
                    clearInterval(timer);
                    if (!bestTime || gameTime < bestTime) {
                        bestTime = gameTime;
                        localStorage.setItem('mazebestTime', bestTime);
                        updateScore();
                        alert(`üéâ New Best Time: ${gameTime}s!`);
                    } else {
                        alert(`Maze Complete! Time: ${gameTime}s`);
                    }
                    gameStarted = false;
                }
            }
        }
        
        function startTimer() {
            timer = setInterval(() => {
                gameTime++;
                updateScore();
            }, 1000);
        }
        
        function updateScore() {
            document.getElementById('time').textContent = gameTime;
            document.getElementById('best').textContent = bestTime || '--';
        }
        
        function newMaze() {
            if (timer) clearInterval(timer);
            gameTime = 0;
            gameStarted = false;
            player = { x: 1, y: 1 };
            generateMaze();
            updateScore();
            draw();
        }
        
        function resetPlayer() {
            if (timer) clearInterval(timer);
            gameTime = 0;
            gameStarted = false;
            player = { x: 1, y: 1 };
            updateScore();
            draw();
        }
        
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case 'ArrowUp': movePlayer(0, -1); break;
                case 'ArrowDown': movePlayer(0, 1); break;
                case 'ArrowLeft': movePlayer(-1, 0); break;
                case 'ArrowRight': movePlayer(1, 0); break;
            }
            draw();
        });
        
        // Initialize
        generateMaze();
        updateScore();
        draw();
    </script>
</body>
</html>
